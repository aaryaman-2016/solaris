#include <iostream>
#include <vector>
using namespace std;

int main(void)
{
    int n; 
    cin >> n;
    const int MOD = 12;
    vector<int> c(n+1);
    for (int i = 1; i <=n; i++)
    {
        cin >> c[i];
    }
    vector<vector<int>> graph(n+1);
    for (int i = 0; i <n-1; i++)
    {
        int u, v;
        cin >> u >> v;
        graph[u].push_back(v);
        graph[v].push_back(u);
    }

    int start = 1;


    long long count_even = 0, count_odd = 0;
    long long even = 0, odd = 0;
    vector<int> q(n + 5);
    vector<int> depth(n+1, -1);
    int head = 0; int tail = 0;
    q[tail++] = start;
    depth[start] = 0;
    while(head < tail)
    {
        int node = q[head++];
        if (depth[node]%2 == 0)
        {
            count_even++;
            even += c[node];
            if (even >= MOD) even -= MOD;
        } 
        else 
        {
            count_odd++;
            odd += c[node];
            if (odd >= MOD) odd -= MOD;
        }
        for (int i = 0; i <(int)graph[node].size(); i++)
        {
            int u = graph[node][i];
            if (depth[u] == -1)
            {
                depth[u] = depth[node] + 1;
                q[tail++] = u;
            }
        }
    }
    int D = odd - even;
    D %= MOD;
    // cout << D << " " << odd << " " << even << " ";
    if (D < 0) D += MOD;

    long long ans = 0;
    if (D == 0) {
        ans = n;                
    } else if (D == 1) {
        ans = count_odd;           
    } else if (D == 11) {        
        ans = count_even;            
    } else {
        ans = 0;                 
    }

    cout << ans << "\n";
    return 0;
}